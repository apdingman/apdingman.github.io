<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Deploy an AWS Budget using Pulumi | Adam Dingman</title><meta name=keywords content><meta name=description content="What is Pulumi? Pulumi is yet another Infrastructure as Code (IaC) tool for deploying infrastructure using declaritive language which offers you the ability to pick your language of choice amongst TypeScript, JavaScript, Python, Go, .NET, Java, and YAML to define your infrastructure.
How am I using Pulumi? I really wanted a quick and easy means to get a feel for the basic structure of a Pulumi project and to get a feel for the CLI."><meta name=author content="Adam Dingman"><link rel=canonical href=https://apdingman.github.io/posts/pulumi-aws-budgets/><link crossorigin=anonymous href=/assets/css/stylesheet.69b9cf536e4dd0dd3d4a552187b555bb37d0696e4f627f77fae745fbe0fb717c.css integrity="sha256-abnPU25N0N09SlUhh7VVuzfQaW5PYn93+udF++D7cXw=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG+9vmJ0cTS+ovo0FeA=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://apdingman.github.io/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://apdingman.github.io/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://apdingman.github.io/favicon-32x32.png><link rel=apple-touch-icon href=https://apdingman.github.io/apple-touch-icon.png><link rel=mask-icon href=https://apdingman.github.io/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style></noscript><script async src="https://www.googletagmanager.com/gtag/js?id=G-WGJK2RQ8MH"></script>
<script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-WGJK2RQ8MH",{anonymize_ip:!1})}</script><script type=application/javascript>var doNotTrack=!1;doNotTrack||(window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","G-WGJK2RQ8MH","auto"),ga("send","pageview"))</script><script async src=https://www.google-analytics.com/analytics.js></script>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-WGJK2RQ8MH"></script>
<script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-WGJK2RQ8MH",{anonymize_ip:!1})}</script><meta property="og:title" content="Deploy an AWS Budget using Pulumi"><meta property="og:description" content="What is Pulumi? Pulumi is yet another Infrastructure as Code (IaC) tool for deploying infrastructure using declaritive language which offers you the ability to pick your language of choice amongst TypeScript, JavaScript, Python, Go, .NET, Java, and YAML to define your infrastructure.
How am I using Pulumi? I really wanted a quick and easy means to get a feel for the basic structure of a Pulumi project and to get a feel for the CLI."><meta property="og:type" content="article"><meta property="og:url" content="https://apdingman.github.io/posts/pulumi-aws-budgets/"><meta property="og:image" content="https://apdingman.github.io/posts/pulumi-aws-budgets/images/cover.svg"><meta property="article:section" content="posts"><meta property="article:published_time" content="2023-02-07T00:00:00-05:00"><meta property="article:modified_time" content="2023-02-07T00:00:00-05:00"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://apdingman.github.io/posts/pulumi-aws-budgets/images/cover.svg"><meta name=twitter:title content="Deploy an AWS Budget using Pulumi"><meta name=twitter:description content="What is Pulumi? Pulumi is yet another Infrastructure as Code (IaC) tool for deploying infrastructure using declaritive language which offers you the ability to pick your language of choice amongst TypeScript, JavaScript, Python, Go, .NET, Java, and YAML to define your infrastructure.
How am I using Pulumi? I really wanted a quick and easy means to get a feel for the basic structure of a Pulumi project and to get a feel for the CLI."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":2,"name":"Posts","item":"https://apdingman.github.io/posts/"},{"@type":"ListItem","position":3,"name":"Deploy an AWS Budget using Pulumi","item":"https://apdingman.github.io/posts/pulumi-aws-budgets/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Deploy an AWS Budget using Pulumi","name":"Deploy an AWS Budget using Pulumi","description":"What is Pulumi? Pulumi is yet another Infrastructure as Code (IaC) tool for deploying infrastructure using declaritive language which offers you the ability to pick your language of choice amongst TypeScript, JavaScript, Python, Go, .NET, Java, and YAML to define your infrastructure.\nHow am I using Pulumi? I really wanted a quick and easy means to get a feel for the basic structure of a Pulumi project and to get a feel for the CLI.","keywords":[],"articleBody":"What is Pulumi? Pulumi is yet another Infrastructure as Code (IaC) tool for deploying infrastructure using declaritive language which offers you the ability to pick your language of choice amongst TypeScript, JavaScript, Python, Go, .NET, Java, and YAML to define your infrastructure.\nHow am I using Pulumi? I really wanted a quick and easy means to get a feel for the basic structure of a Pulumi project and to get a feel for the CLI. In order to accomplish this I’m setting up a super basic budget to track and notify on S3 spend in an AWS account.\nExample I’ve included the skeleton Pulumi project that I used for this example here: https://github.com/apdingman/pulumi-aws-budgets\nPrerequisites I’m performing these steps on a macOS (and you should consider adding macOS in your life too if you haven’t already).\nAn AWS account to deploy resources to Named AWS profiles configured on your local machine Homebrew installed Basic Steps Install Pulumi brew install pulumi Update Pulumi Config to use the Appropriate Named AWS Profile pulumi config set aws:profile personal Create a Pulumi.yaml file Create a file named pulumi.yml with the following content:\nname: pulumi-aws-budgets runtime: yaml description: A simple example of using Pulumi to deploy a budget in an AWS account resources: s3: type: aws:budgets:Budget properties: name: s3-budget budgetType: COST costFilters: - name: Service values: - Amazon Simple Storage Service limitAmount: '30' limitUnit: USD notifications: - comparisonOperator: GREATER_THAN notificationType: ACTUAL subscriberEmailAddresses: - [youremail@domain.com] threshold: 100 thresholdType: PERCENTAGE timeUnit: MONTHLY Deploy your budget Run the command:\npulumi up You’ll be presented with a prompt like so:\nNavigate to yes, and press enter.\nYou’ll be presented with information that shows that your pulumi stack and the budget included specified has been created:\nVerify in the AWS console Navigate to the AWS billing service in the AWS console and confirm that your budget was created as expected: Tear down Destroying resources managed by Pulumi is super straightforward. Simply run the destroy command and confirm that you want to perform the destroy.\npulumi destroy What is next? Kicking the tires on Pulumi’s Policy as Code (PaC) offering called Pulumi Crossguard.\n","wordCount":"351","inLanguage":"en","image":"https://apdingman.github.io/posts/pulumi-aws-budgets/images/cover.svg","datePublished":"2023-02-07T00:00:00-05:00","dateModified":"2023-02-07T00:00:00-05:00","author":{"@type":"Person","name":"Adam Dingman"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://apdingman.github.io/posts/pulumi-aws-budgets/"},"publisher":{"@type":"Organization","name":"Adam Dingman","logo":{"@type":"ImageObject","url":"https://apdingman.github.io/favicon.ico"}}}</script></head><body id=top><header class=header><nav class=nav><div class=logo><a href=https://apdingman.github.io accesskey=h title="Adam Dingman (Alt + H)">Adam Dingman</a><div class=logo-switches></div></div><ul id=menu><li><a href=https://apdingman.github.io/about title=About><span>About</span></a></li><li><a href=https://apdingman.github.io/posts title=Blog><span>Blog</span></a></li><li><a href=https://apdingman.github.io/certifications title=Certifications><span>Certifications</span></a></li><li><a href=https://apdingman.github.io/tweets/my-fav-tweets title="My Favorite Tweets"><span>My Favorite Tweets</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class=post-title>Deploy an AWS Budget using Pulumi</h1><div class=post-meta><span title='2023-02-07 00:00:00 -0500 -0500'>February 7, 2023</span>&nbsp;·&nbsp;Adam Dingman</div></header><div class=post-content><h2 id=what-is-pulumi>What is Pulumi?<a hidden class=anchor aria-hidden=true href=#what-is-pulumi>#</a></h2><p><a href=https://www.pulumi.com>Pulumi</a> is yet another Infrastructure as Code (IaC) tool for deploying infrastructure using declaritive language which offers you the ability to pick your language of choice amongst TypeScript, JavaScript, Python, Go, .NET, Java, and YAML to define your infrastructure.</p><h2 id=how-am-i-using-pulumi>How am I using Pulumi?<a hidden class=anchor aria-hidden=true href=#how-am-i-using-pulumi>#</a></h2><p>I really wanted a quick and easy means to get a feel for the basic structure of a Pulumi project and to get a feel for the CLI. In order to accomplish this I&rsquo;m setting up a super basic budget to track and notify on S3 spend in an AWS account.</p><h2 id=example>Example<a hidden class=anchor aria-hidden=true href=#example>#</a></h2><p>I&rsquo;ve included the skeleton Pulumi project that I used for this example here: <a href=https://github.com/apdingman/pulumi-aws-budgets>https://github.com/apdingman/pulumi-aws-budgets</a></p><h3 id=prerequisites>Prerequisites<a hidden class=anchor aria-hidden=true href=#prerequisites>#</a></h3><p>I&rsquo;m performing these steps on a macOS (and you should consider adding macOS in your life too if you haven&rsquo;t already).</p><ul><li>An AWS account to deploy resources to</li><li><a href=https://docs.aws.amazon.com/cli/latest/userguide/cli-configure-profiles.html>Named AWS profiles</a> configured on your local machine</li><li>Homebrew installed</li></ul><h3 id=basic-steps>Basic Steps<a hidden class=anchor aria-hidden=true href=#basic-steps>#</a></h3><h4 id=install-pulumi>Install Pulumi<a hidden class=anchor aria-hidden=true href=#install-pulumi>#</a></h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>brew install pulumi
</span></span></code></pre></div><h4 id=update-pulumi-config-to-use-the-appropriate-named-aws-profile>Update Pulumi Config to use the Appropriate Named AWS Profile<a hidden class=anchor aria-hidden=true href=#update-pulumi-config-to-use-the-appropriate-named-aws-profile>#</a></h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>pulumi config set aws:profile personal
</span></span></code></pre></div><h4 id=create-a-pulumiyaml-file>Create a Pulumi.yaml file<a hidden class=anchor aria-hidden=true href=#create-a-pulumiyaml-file>#</a></h4><p>Create a file named <code>pulumi.yml</code> with the following content:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#f92672>name</span>: <span style=color:#ae81ff>pulumi-aws-budgets</span>
</span></span><span style=display:flex><span><span style=color:#f92672>runtime</span>: <span style=color:#ae81ff>yaml</span>
</span></span><span style=display:flex><span><span style=color:#f92672>description</span>: <span style=color:#ae81ff>A simple example of using Pulumi to deploy a budget in an AWS account</span>
</span></span><span style=display:flex><span><span style=color:#f92672>resources</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>s3</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>type</span>: <span style=color:#ae81ff>aws:budgets:Budget</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>properties</span>:
</span></span><span style=display:flex><span>      <span style=color:#f92672>name</span>: <span style=color:#ae81ff>s3-budget</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>budgetType</span>: <span style=color:#ae81ff>COST</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>costFilters</span>:
</span></span><span style=display:flex><span>        - <span style=color:#f92672>name</span>: <span style=color:#ae81ff>Service</span>
</span></span><span style=display:flex><span>          <span style=color:#f92672>values</span>:
</span></span><span style=display:flex><span>            - <span style=color:#ae81ff>Amazon Simple Storage Service</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>limitAmount</span>: <span style=color:#e6db74>&#39;30&#39;</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>limitUnit</span>: <span style=color:#ae81ff>USD</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>notifications</span>:
</span></span><span style=display:flex><span>        - <span style=color:#f92672>comparisonOperator</span>: <span style=color:#ae81ff>GREATER_THAN</span>
</span></span><span style=display:flex><span>          <span style=color:#f92672>notificationType</span>: <span style=color:#ae81ff>ACTUAL</span>
</span></span><span style=display:flex><span>          <span style=color:#f92672>subscriberEmailAddresses</span>:
</span></span><span style=display:flex><span>            - [<span style=color:#ae81ff>youremail@domain.com]</span>
</span></span><span style=display:flex><span>          <span style=color:#f92672>threshold</span>: <span style=color:#ae81ff>100</span>
</span></span><span style=display:flex><span>          <span style=color:#f92672>thresholdType</span>: <span style=color:#ae81ff>PERCENTAGE</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>timeUnit</span>: <span style=color:#ae81ff>MONTHLY</span>
</span></span></code></pre></div><h4 id=deploy-your-budget>Deploy your budget<a hidden class=anchor aria-hidden=true href=#deploy-your-budget>#</a></h4><p>Run the command:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>pulumi up
</span></span></code></pre></div><p>You&rsquo;ll be presented with a prompt like so:</p><p><img loading=lazy src=images/pulumi-up.png alt="pulumi up"></p><p>Navigate to <strong>yes</strong>, and press <strong>enter</strong>.</p><p>You&rsquo;ll be presented with information that shows that your <em>pulumi</em> stack and the budget included specified has been created:</p><p><img loading=lazy src=images/pulumi-created.png alt="pulumi created"></p><h4 id=verify-in-the-aws-console>Verify in the AWS console<a hidden class=anchor aria-hidden=true href=#verify-in-the-aws-console>#</a></h4><p>Navigate to the AWS billing service in the AWS console and confirm that your budget was created as expected:
<img loading=lazy src=images/aws-console-1.png alt="aws console 1"></p><h4 id=tear-down>Tear down<a hidden class=anchor aria-hidden=true href=#tear-down>#</a></h4><p>Destroying resources managed by Pulumi is super straightforward. Simply run the destroy command and confirm that you want to perform the destroy.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>pulumi destroy
</span></span></code></pre></div><p><img loading=lazy src=images/pulumi-destroy.png alt="pulumi destroy"></p><h2 id=what-is-next>What is next?<a hidden class=anchor aria-hidden=true href=#what-is-next>#</a></h2><p>Kicking the tires on Pulumi&rsquo;s Policy as Code (PaC) offering called <a href=https://www.pulumi.com/docs/guides/crossguard/>Pulumi Crossguard</a>.</p></div><footer class=post-footer><ul class=post-tags></ul></footer></article></main><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script></body></html>